<html>
<head>
<style>
body {
  min-width:357px;
 
  overflow-x:hidden;
  background:#313131;
  color:white;
  font-family: Arial, Helvetica, sans-serif;
 
}

tr.info {
     font-size: 11px;
}
#idListeSkillsConnus table,#idSkillInTraining table {
    width:98%;
    border-collapse: collapse;
}

#idListeSkillsConnus table tbody tr td {
    border: 1px black solid;

}

#idSkillInTraining table tbody tr td {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;
    border: 1px black solid;
}

#idListeSkillsConnus table tbody tr th {
    text-align:left;

}
th.header {
    background:#424242 url(img/vertNavInactiveBG.jpg);
    height: 20px;
    font: normal normal normal 100%/normal Arial, Helvetica, sans-serif;
    font-size: 12px;
    text-transform: uppercase;
    font-weight: bold;
    padding-left: 5px;
}
th.header:hover {
    background:#636363 url(img/vertNavActiveBG.jpg);;
    cursor:pointer;
}
td.skillName{
padding-left: 30px;
 font-size: 11px;
}
td.skillLv {
    width:50px;
}

tr.nd {
    display:none;
}

span.spsumm{
    color: #FA9E0E;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    padding-left:4px;
}

div.progress {
    width: 46px;
    height:2px;
    margin-top: 2px;
    border: 1px solid #818184;

}

td.queueTime {
    margin: 1px;
    width: 90px;
}
td.queueInfo {
    margin: 0;
    width: 46px;
}
</style>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="datejs.js"></script>
<script type="text/javascript" src="funcs.js"></script>
<script>

var queueTrList = [];

function init() {
    var res = chrome.extension.getBackgroundPage().document.getElementById('main');
    document.getElementById('i').innerHTML = res.innerHTML;
    $("th.header").live('click', function(){
           $(this).parent().parent().find('tr.skill').toggleClass("nd");
    });
    var queueDiv = document.getElementById('idSkillInTraining');
    queueTrList = queueDiv.getElementsByTagName('tr');
    updateCounters();
}

function updateCounters() {
    for (var i=0,row; row = queueTrList[i]; i++) {
        var start = Date.parse(row.getAttribute('start'));
        var end = Date.parse(row.getAttribute('end'));
        start.addMinutes(new Date().getTimezoneOffset() * -1);
        end.addMinutes(new Date().getTimezoneOffset() * -1);
        row.getElementsByTagName('td')[2].innerHTML = differenceDates(end,1000)[4];
        row.getElementsByTagName('img')[1].setAttribute('width', getCurrPrec(start,end,parseInt(row.getAttribute('from')),parseInt(row.getAttribute('to')),parseInt(row.getAttribute('level')),parseInt(row.getAttribute('rank')))+'%');
    }
    setTimeout("updateCounters()",1000);
}
</script>
</head>
<body onload="init()"><div id="i"></div></body>
</html>